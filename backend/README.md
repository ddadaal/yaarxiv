# yaarxiv backend

# Features

- Auto parse the `schemas.json` (located at and generated by the api project) for model validation, faster serialization and deserialization, route specification, swagger generation.
- [nanoid](https://github.com/ai/nanoid) for user id generation
- [bcrypt](https://github.com/dcodeIO/bcrypt.js) to protect passwords

# Tools Used

- fastify
- typeorm
- TypeScript
- eslint

# Development

```bash
# Install dependencies
npm install

# Generate dev config
npm run generateConfig:dev

# Run migrations
npm run typeorm:cli migration:run

# Start
npm start

# When executing typeorm:cli, pass argument using -- as follows
npm run typeorm:cli migration:generate -- -n now
```

# Deployment

```bash
# Clone the project (with the api project on the parent)

# Set env `NODE_ENV` to `production`
export NODE_ENV=production

# Copy `config/production.sample.json` to `config/production.json` and change the configs
cp config/production.sample.json config/production.json
vim config/production.json

# Install dependencies
npm install

# Generate config
npm run generateConfig:prod

# Build
npm run build

# Serve
npm run serve
```
