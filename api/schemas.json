{
  "routes": {
    "AdminGetArticlesSchema": {
      "type": "object",
      "properties": {
        "querystring": {
          "type": "object",
          "properties": {
            "searchWord": {
              "type": "string",
              "description": "The keyword to search"
            },
            "page": {
              "type": "number",
              "description": "The page number. 10 results per page.",
              "default": 1
            }
          },
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "properties": {
                "articles": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/AdminGetArticlesResult"
                  },
                  "description": "Paginated articles."
                },
                "totalCount": {
                  "type": "number",
                  "description": "The total count of articles with specified search keyword."
                }
              },
              "required": [
                "articles",
                "totalCount"
              ],
              "additionalProperties": false
            },
            "401": {
              "type": "object",
              "additionalProperties": false,
              "description": "Not login"
            },
            "403": {
              "type": "object",
              "additionalProperties": false,
              "description": "Not admin."
            }
          },
          "required": [
            "200",
            "403",
            "401"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "querystring",
        "responses"
      ],
      "additionalProperties": false
    },
    "DeleteArticleSchema": {
      "type": "object",
      "properties": {
        "path": {
          "type": "object",
          "properties": {
            "articleId": {
              "type": "string",
              "description": "The ID of the article to be deleted."
            }
          },
          "required": [
            "articleId"
          ],
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "additionalProperties": false,
              "description": "The article and all is deleted."
            },
            "403": {
              "type": "object",
              "additionalProperties": false,
              "description": "The user cannot delete the article."
            },
            "404": {
              "type": "object",
              "additionalProperties": false,
              "description": "The article is not found."
            }
          },
          "required": [
            "200",
            "404",
            "403"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "path",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Delete an article and all of its revisions.\r\nOnly the owner and admin can do it."
    },
    "GetArticleSchema": {
      "type": "object",
      "properties": {
        "path": {
          "type": "object",
          "properties": {
            "articleId": {
              "type": "string",
              "description": "Article ID."
            }
          },
          "required": [
            "articleId"
          ],
          "additionalProperties": false
        },
        "querystring": {
          "type": "object",
          "properties": {
            "revision": {
              "type": "number",
              "description": "Revision nunber.\r\nIf not set, the latest revision will be returned."
            }
          },
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "properties": {
                "article": {
                  "$ref": "#/definitions/Article",
                  "description": "The article information."
                }
              },
              "required": [
                "article"
              ],
              "additionalProperties": false,
              "description": "Returns the latest revision of an article."
            },
            "404": {
              "type": "object",
              "properties": {
                "notFound": {
                  "type": "string",
                  "enum": [
                    "article",
                    "revision"
                  ]
                }
              },
              "required": [
                "notFound"
              ],
              "additionalProperties": false,
              "description": "The article or specified revision is not found."
            }
          },
          "required": [
            "200",
            "404"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "path",
        "querystring",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Get the full information of an article."
    },
    "SearchArticleSchema": {
      "type": "object",
      "properties": {
        "querystring": {
          "type": "object",
          "properties": {
            "searchText": {
              "type": "string",
              "description": "The search text"
            },
            "startYear": {
              "type": "number",
              "description": "The start year limit."
            },
            "endYear": {
              "type": "number",
              "description": "The end year limit."
            },
            "authorNames": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ],
              "description": "The name of authors"
            },
            "keywords": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ],
              "description": "Keywords"
            },
            "page": {
              "type": "number",
              "description": "The page number. 10 results per page.",
              "default": 1
            }
          },
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "properties": {
                "results": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/ArticleSearchResult"
                  },
                  "description": "The paginated results"
                },
                "totalCount": {
                  "type": "number",
                  "description": "The total count of results."
                }
              },
              "required": [
                "results",
                "totalCount"
              ],
              "additionalProperties": false,
              "description": "The search is successful."
            }
          },
          "required": [
            "200"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "querystring",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Search article with optional parameters."
    },
    "UpdateArticleSchema": {
      "type": "object",
      "properties": {
        "path": {
          "type": "object",
          "properties": {
            "articleId": {
              "type": "string",
              "description": "The original articleId."
            }
          },
          "required": [
            "articleId"
          ],
          "additionalProperties": false
        },
        "body": {
          "type": "object",
          "properties": {
            "pdfToken": {
              "type": "string",
              "description": "The file token generated by uploading the PDF file."
            },
            "title": {
              "type": "string",
              "description": "The title of the article.",
              "maxLength": 100
            },
            "authors": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "The authors of the article."
            },
            "keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "The keywords of the article."
            },
            "abstract": {
              "type": "string",
              "description": "The abstract of the article.",
              "maxLength": 2000
            }
          },
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "201": {
              "type": "object",
              "properties": {
                "revisionNumber": {
                  "type": "number",
                  "description": "The new revision number."
                }
              },
              "required": [
                "revisionNumber"
              ],
              "additionalProperties": false,
              "description": "The update is successful."
            },
            "401": {
              "type": "object",
              "additionalProperties": false,
              "description": "Not logged in."
            },
            "403": {
              "type": "object",
              "additionalProperties": false,
              "description": "The user is not the owner."
            },
            "404": {
              "type": "object",
              "additionalProperties": false,
              "description": "The article is not found."
            }
          },
          "required": [
            "201",
            "401",
            "403",
            "404"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "path",
        "body",
        "responses"
      ],
      "additionalProperties": false
    },
    "UploadArticleSchema": {
      "type": "object",
      "properties": {
        "body": {
          "type": "object",
          "properties": {
            "pdfToken": {
              "type": "string",
              "description": "The file token generated by uploading the PDF file."
            },
            "title": {
              "type": "string",
              "description": "The title of the article.",
              "maxLength": 100
            },
            "authors": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "The authors of the article."
            },
            "keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "The keywords of the article."
            },
            "abstract": {
              "type": "string",
              "description": "The abstract of the article.",
              "maxLength": 2000
            }
          },
          "required": [
            "pdfToken",
            "title",
            "authors",
            "keywords",
            "abstract"
          ],
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "201": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "The id of the new article."
                }
              },
              "required": [
                "id"
              ],
              "additionalProperties": false,
              "description": "The upload is successful."
            }
          },
          "required": [
            "201"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "body",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Upload an new article into the platform."
    },
    "UploadPDFSchema": {
      "type": "object",
      "properties": {
        "body": {
          "type": "object",
          "properties": {
            "file": {
              "type": "object",
              "description": "The file object.\r\n1 PDF per request."
            }
          },
          "required": [
            "file"
          ],
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "201": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string",
                  "description": "The token for the upload.\r\nIt is used to upload the following content of the article."
                }
              },
              "required": [
                "token"
              ],
              "additionalProperties": false,
              "description": "The upload is successful."
            }
          },
          "required": [
            "201"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "body",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Upload a PDF into the platform.\r\nExpect Content-Type to be multipart/form-data."
    },
    "LoginSchema": {
      "type": "object",
      "properties": {
        "querystring": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The login id, for example email"
            },
            "password": {
              "type": "string",
              "description": "The password"
            }
          },
          "required": [
            "id",
            "password"
          ],
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string",
                  "description": "The generated token"
                },
                "name": {
                  "type": "string",
                  "description": "The name of the user"
                },
                "role": {
                  "$ref": "#/definitions/UserRole",
                  "description": "The role of the user."
                }
              },
              "required": [
                "token",
                "name",
                "role"
              ],
              "additionalProperties": false,
              "description": "The request is success"
            },
            "401": {
              "type": "object",
              "additionalProperties": false,
              "description": "The request fails"
            }
          },
          "required": [
            "200",
            "401"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "querystring",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Login"
    },
    "RegisterSchema": {
      "type": "object",
      "properties": {
        "body": {
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "description": "The email.\r\nRequires to be an edu email.",
              "format": "email"
            },
            "password": {
              "type": "string",
              "description": "The password"
            }
          },
          "required": [
            "email",
            "password"
          ],
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "201": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string",
                  "description": "The generated token"
                },
                "name": {
                  "type": "string",
                  "description": "The initial name of the newly-created user."
                }
              },
              "required": [
                "token",
                "name"
              ],
              "additionalProperties": false,
              "description": "Registration is success."
            },
            "405": {
              "type": "object",
              "additionalProperties": false,
              "description": "The email already exists."
            }
          },
          "required": [
            "201",
            "405"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "body",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Register"
    },
    "UserGetArticleInfoSchema": {
      "type": "object",
      "properties": {
        "querystring": {
          "type": "object",
          "properties": {
            "page": {
              "type": "number",
              "description": "The page number. 10 results per page.",
              "default": 1
            }
          },
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "properties": {
                "articles": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/DashboardArticleInfo"
                  },
                  "description": "The articles the user has."
                },
                "totalCount": {
                  "type": "number",
                  "description": "The total count of articles."
                }
              },
              "required": [
                "articles",
                "totalCount"
              ],
              "additionalProperties": false
            },
            "401": {
              "type": "object",
              "additionalProperties": false,
              "description": "The request is not authenticated."
            }
          },
          "required": [
            "200",
            "401"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "querystring",
        "responses"
      ],
      "additionalProperties": false
    },
    "GreetingSchema": {
      "type": "object",
      "properties": {
        "querystring": {
          "type": "object",
          "properties": {
            "username": {
              "type": "string",
              "description": "The username"
            }
          },
          "required": [
            "username"
          ],
          "additionalProperties": false
        },
        "responses": {
          "type": "object",
          "properties": {
            "200": {
              "type": "object",
              "properties": {
                "hello": {
                  "type": "string",
                  "description": "The user same as the input querystring"
                }
              },
              "required": [
                "hello"
              ],
              "additionalProperties": false,
              "description": "Hello"
            }
          },
          "required": [
            "200"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "querystring",
        "responses"
      ],
      "additionalProperties": false,
      "description": "Home page api"
    }
  },
  "models": {
    "AdminGetArticlesResult": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The article id."
        },
        "title": {
          "type": "string",
          "description": "The article title of the latest revision."
        },
        "createTime": {
          "type": "string",
          "description": "The time the article is first created."
        },
        "lastUpdatedTime": {
          "type": "string",
          "description": "Last updated time"
        },
        "revisionCount": {
          "type": "number",
          "description": "The number of revisions this article has."
        }
      },
      "required": [
        "id",
        "title",
        "createTime",
        "lastUpdatedTime",
        "revisionCount"
      ],
      "additionalProperties": false
    },
    "Author": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of author."
        },
        "affiliation": {
          "type": "string",
          "description": "The affiliation of the author"
        }
      },
      "required": [
        "name"
      ],
      "additionalProperties": false,
      "description": "The author information."
    },
    "ArticleInfo": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the article."
        },
        "authors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Author"
          },
          "description": "The authors of the article."
        },
        "abstract": {
          "type": "string",
          "description": "The abstract."
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The keywords of the article."
        },
        "category": {
          "type": "string",
          "description": "The category of the article."
        },
        "pdfLink": {
          "type": "string",
          "description": "The download link of the pdf"
        }
      },
      "required": [
        "title",
        "authors",
        "abstract",
        "keywords",
        "category",
        "pdfLink"
      ],
      "additionalProperties": false,
      "description": "The brief info of an revision of an article."
    },
    "ArticleRevision": {
      "type": "object",
      "properties": {
        "number": {
          "type": "number",
          "description": "The number of the revision starting from 1."
        },
        "time": {
          "type": "string",
          "description": "Upload time.\r\nMust be a valid ISO string with timezone."
        }
      },
      "required": [
        "number",
        "time"
      ],
      "additionalProperties": false
    },
    "Article": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The id of the article."
        },
        "revisionNumber": {
          "type": "number",
          "description": "Current revision number.\r\nMust be a integer."
        },
        "currentRevision": {
          "$ref": "#/definitions/ArticleInfo",
          "description": "The current revision."
        },
        "revisions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ArticleRevision"
          },
          "description": "All revisions"
        },
        "ownerId": {
          "type": "string",
          "description": "Owner User Id"
        }
      },
      "required": [
        "id",
        "revisionNumber",
        "currentRevision",
        "revisions",
        "ownerId"
      ],
      "additionalProperties": false,
      "description": "The full article info."
    },
    "ArticleComment": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The comment id."
        },
        "articleId": {
          "type": "string",
          "description": "The article id."
        },
        "revisionNumber": {
          "type": "number",
          "description": "Revision the comment is targeting.\r\nIf undefined, the comment is targeting the article itself."
        },
        "userId": {
          "type": "string",
          "description": "User"
        },
        "createTime": {
          "type": "string",
          "description": "The time the comment is first created."
        },
        "lastUpdatedTime": {
          "type": "string",
          "description": "The time the comment is last updated."
        },
        "content": {
          "type": "string",
          "description": "Content"
        }
      },
      "required": [
        "id",
        "articleId",
        "userId",
        "createTime",
        "lastUpdatedTime",
        "content"
      ],
      "additionalProperties": false,
      "description": "The comment to an article."
    },
    "ArticleSearchResult": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the article."
        },
        "authors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Author"
          },
          "description": "The authors of the article."
        },
        "abstract": {
          "type": "string",
          "description": "The abstract."
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The keywords of the article."
        },
        "category": {
          "type": "string",
          "description": "The category of the article."
        },
        "articleId": {
          "type": "string",
          "description": "The id of the article."
        },
        "commentCount": {
          "type": "number",
          "description": "The number of comments the article has."
        },
        "createTime": {
          "type": "string",
          "description": "The time when the article is first uploaded to the platform.\r\nMust be a valid datetime string."
        },
        "lastUpdateTime": {
          "type": "string",
          "description": "The time when the article is last updated.\r\nMust be a valid datetime string."
        }
      },
      "required": [
        "abstract",
        "articleId",
        "authors",
        "category",
        "commentCount",
        "createTime",
        "keywords",
        "lastUpdateTime",
        "title"
      ],
      "additionalProperties": false,
      "description": "A preview information of the article."
    },
    "Omit<ArticleInfo,\"pdfLink\">": {
      "$ref": "#/definitions/Pick%3CArticleInfo%2CExclude%3C(%22title%22%7C%22authors%22%7C%22abstract%22%7C%22keywords%22%7C%22category%22%7C%22pdfLink%22)%2C%22pdfLink%22%3E%3E"
    },
    "Pick<ArticleInfo,Exclude<(\"title\"|\"authors\"|\"abstract\"|\"keywords\"|\"category\"|\"pdfLink\"),\"pdfLink\">>": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the article."
        },
        "authors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Author"
          },
          "description": "The authors of the article."
        },
        "abstract": {
          "type": "string",
          "description": "The abstract."
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The keywords of the article."
        },
        "category": {
          "type": "string",
          "description": "The category of the article."
        }
      },
      "required": [
        "title",
        "authors",
        "abstract",
        "keywords",
        "category"
      ],
      "additionalProperties": false
    },
    "UserRole": {
      "type": "string",
      "enum": [
        "user",
        "admin"
      ]
    },
    "DashboardArticleInfo": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The article id."
        },
        "title": {
          "type": "string",
          "description": "The article title of the latest revision."
        },
        "createTime": {
          "type": "string",
          "description": "The time the article is first created."
        },
        "lastUpdatedTime": {
          "type": "string",
          "description": "Last updated time"
        },
        "revisionCount": {
          "type": "number",
          "description": "The number of revisions this article has."
        }
      },
      "required": [
        "id",
        "title",
        "createTime",
        "lastUpdatedTime",
        "revisionCount"
      ],
      "additionalProperties": false,
      "description": "Get the articles this user is the owner of."
    }
  }
}